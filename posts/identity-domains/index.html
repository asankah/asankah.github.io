<!doctype html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8" />
    <title>Identity Domains</title>
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/images/apple-touch-icon.png"
    />
    <link rel="icon" href="/images/favicon.ico" />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/images/favicon-16x16.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/images/favicon-32x32.png"
    />
    <link rel="manifest" href="/site.webmanifest" />
    <link
      rel="mask-icon"
      href="/images/safari-pinned-tab.svg"
      color="#5bbad5"
    />
    <meta name="msapplication-TileColor" content="#da532c" />
    <meta name="theme-color" content="#ffffff" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="" />

    <link
      href="https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,200..900;1,200..900&family=Inconsolata:wght@200..900&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap&family=Material+Symbols+Outlined"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/styles/C7rAX9391l.css" />
    <link rel="me" href="mailto:asanka@gmail.com" />
    <link rel="me" href="https://github.com/asankah" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <meta name="ai-generated" content="none" />
  </head>

  <body>
    <header class="container">
      <nav class="top" itemscope="" itemtype="https://schema.org/Blog">
        <h1 itemprop="name">
          <a href="/" itemprop="url">Strong Opinions Weekly Held</a>
        </h1>
        <span></span>

        <h2><a href="/">Home</a></h2>

        <h2 itemprop="author" itemscope="" itemtype="https://schema.org/Person">
          <a href="/about/me/" itemprop="sameAs">About</a>
        </h2>

        <h2><a href="/tags/">Tags</a></h2>
        <h2>
          <a href="/feed.xml"><img src="/images/rss.svg" /></a>
        </h2>
      </nav>
    </header>

    <article itemscope="" itemtype="https://schema.org/BlogPosting">
      <link itemprop="url" href="/posts/identity-domains/" />
      <link itemprop="isPartOf" itemtype="https://schema.org/Blog" href="/" />
      <header class="container">
        <div class="">
          <h1 itemprop="name">Identity Domains</h1>
          <nav>
            <div class="metadata">
              Published on
              <time datetime="2020-05-01" itemprop="datePublished"
                >May 1, 2020</time
              >
              by <span class="author" itemprop="author">Asanka Herath</span>.

              <br />
              Estimated reading time is <time>7 minutes</time>.
            </div>
            <span></span>
            <menu class="tags">
              <li>
                <span class="tag"> #<a href="/tags/privacy/">Privacy</a> </span>
              </li>
            </menu>
          </nav>
        </div>
      </header>

      <main itemprop="articleBody" class="container">
        <blockquote>
          <p>
            An <strong>Identity domain</strong> is a scope within which we
            consider it a given that the user has a shared or trivially joinable
            identity.
          </p>
        </blockquote>
        <p>
          This is a privacy boundary, not a security boundary. Hence it assumes
          that where possible all sites share information.
        </p>
        <figure>
          <img
            src="/posts/identity-domains/EE2G6Y0X0m-1024.png"
            class="noinvert"
            alt="Diagram of example identity domains described below"
            width="1024"
            height="768"
          />
          <figcaption aria-hidden="true">
            Diagram of example identity domains described below
          </figcaption>
        </figure>
        <p>
          Above is a diagram showing relationships between clusters of documents
          and identity domains.
        </p>
        <ul>
          <li>
            <code>foo.example</code> and <code>baz.example</code> belong to the
            same first party set.
          </li>
          <li>
            <code>a.example</code> has no first-party relationship with any
            other domain.
          </li>
        </ul>
        <p>The <em>Identity domain</em> has the following properties:</p>
        <ul>
          <li>
            <p>
              All
              <a
                href="https://html.spec.whatwg.org/multipage/browsers.html#active-document"
                >active documents</a
              >
              in
              <a
                href="https://html.spec.whatwg.org/multipage/browsers.html#list-of-the-descendant-browsing-contexts"
                >descendent browsing contexts</a
              >
              belong to the same <strong>identity domain</strong> as the active
              document in the
              <a
                href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context"
                >top-level browsing context</a
              >.
            </p>
            <p>See each cluster of browsing contexts in the diagram above.</p>
          </li>
          <li>
            <p>
              All active documents in top-level browsing contexts that share the
              same
              <a
                href="https://html.spec.whatwg.org/multipage/webappapis.html#site"
                >site</a
              >
              also share the same <strong>identity domain</strong>.
            </p>
            <p>
              In the diagram above, <code>foo.example</code> in cluster 1 and
              <code>baz.example</code> in cluster 2 belong to the same
              first-party set, hence they are considered to belong to the same
              identity domain. However <code>a.example</code> in cluster 3 does
              not belong to the same identity domain because there’s no first
              party relation between <code>a.example</code> and any other top
              level domain in the diagram.
            </p>
          </li>
          <li>
            <p>
              All <strong>private client state</strong> including but not
              limited to open sockets, socket pools, cookies, storage,
              permissions / content settings, transient caches of credentials,
              cached resources, service workers, and shared workers accessible
              to any document in an identity domain also belong to the
              <strong><em>identity domain</em></strong
              >.
            </p>
          </li>
          <li>
            <p>
              <strong>Identity domains</strong> don’t span browser profiles.
            </p>
            <p>
              See clusters 1 and 4 in the diagram above. Both share top-level
              origins, but don’t share identity domains because they are in two
              different browser profiles.
            </p>
          </li>
          <li>
            <p><strong>Identity domains</strong> don’t span browsers.</p>
            <p>Derived from above.</p>
          </li>
          <li>
            <p>
              <strong>Identity domains</strong> don’t survive browsing data
              erasures.
            </p>
            <p>
              Erasing an identity domain – and thus an identity – requires
              destroying all private client state mentioned previously. Hence
              erasing an identity domain involves discarding all
              <code>Document</code> objects and workers in that identity domain.
            </p>
          </li>
        </ul>
        <p>
          Note that in the existing web privacy model third-parties can
          trivially associate identities across top-level contexts. Thus the
          entire internet essentially amalgamates into a single identity domain.
        </p>
        <p>
          The boundaries discussed herein require moving to a different model of
          identity on the web. The privacy threat model guiding this model is
          discussed in PING’s
          <a href="https://w3cping.github.io/privacy-threat-model/"
            >Target Privacy Threat Model</a
          >
          document which is a work in progress as of this writing.
        </p>
        <h2 id="additional-notes-and-observations">
          Additional Notes and Observations
        </h2>
        <ul>
          <li>
            <p>
              The identity domain is a privacy boundary. The boundary is
              something that’s asserted by the user-agent and doesn’t depend on
              the cooperation of sites. I.e. assumes that sites involved are
              worst case actors.
            </p>
            <ul>
              <li>
                Not to be confused with security boundaries like those imposed
                via
                <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP"
                  >Content Security Policy</a
                >.
              </li>
            </ul>
          </li>
          <li>
            <p>
              The definition assumes that sites can share information
              out-of-band. The identity domain boundary does not require sites
              to cooperate.
            </p>
          </li>
          <li>
            <p>
              The same site can appear in multiple identity domains. For
              example, re-identification is equivalent to a single site joining
              an identity across disjoint domains.
            </p>
            <p>
              One can also imagine a user-agent that maintains multiple identity
              boundaries for the same top-level site for the purpose of allowing
              multiple sets of cookies to be used from the same device.
            </p>
          </li>
          <li>
            <p>
              Two identity domains can be joined by sharing a unique identifier
              between the two domains.
            </p>
            <ul>
              <li>
                <p>
                  WRT federated identity (as detailed in
                  <a href="https://github.com/samuelgoto/WebID">WebID</a>)
                  multiple relying parties join identity domains by virtue of
                  shared unique identifiers like email address. Similarly
                  identity providers can also generate and use unique
                  identifiers linking domains.
                </p>
                <p>
                  We likely need another term for describing externally joined
                  identity domains. In such cases the UA doesn’t necessarily
                  know or can prevent joining of identity domains.
                </p>
              </li>
            </ul>
          </li>
          <li>
            <p>
              Concepts like “logging out” can be defined in terms of destroying
              an identity domain on the User Agent.
            </p>
          </li>
        </ul>
      </main>

      <footer class="container">
        <div>
          <p>Last modified: <time datetime="2020-05-01">May 1, 2020</time></p>
        </div>
      </footer>
    </article>

    <div class="container"></div>

    <footer class="container">
      <h2>More posts from this blog ...</h2>
      <div
        class="post-summary"
        itemscope=""
        itemtype="https://schema.org/BlogPosting"
      >
        <link itemprop="isPartOf" itemtype="https://schema.org/Blog" href="/" />
        <h2 class="title">
          <a itemprop="url" href="/posts/fart-limit/">
            <span itemprop="name">Fart Limit</span>
          </a>
        </h2>
        <div class="summary-row">
          <div>
            <nav>
              <small>
                Published on
                <time datetime="2021-06-14" itemprop="datePublished"
                  >June 14, 2021</time
                >.
              </small>
              <span></span>
              <menu class="tags">
                <li>
                  <span class="tag">
                    #<a href="/tags/curiosity/">Curiosity</a>
                  </span>
                </li>
              </menu>
            </nav>
            <div class="summary-row">
              <div itemprop="abstract">
                <p>
                  Can a fart be fatal? Let's see what science and OSHA have to
                  say.
                </p>
              </div>
            </div>
            <p class="more"><a href="/posts/fart-limit/">Read more …</a></p>
          </div>
        </div>
      </div>

      <div
        class="post-summary"
        itemscope=""
        itemtype="https://schema.org/BlogPosting"
      >
        <link itemprop="isPartOf" itemtype="https://schema.org/Blog" href="/" />
        <h2 class="title">
          <a itemprop="url" href="/posts/intrinsic-motivation-an-anecdote/">
            <span itemprop="name"
              >Intrinsic and Extrinsic Motivation: An anecdote</span
            >
          </a>
        </h2>
        <div class="summary-row">
          <a href="/posts/intrinsic-motivation-an-anecdote/">
            <img
              src="/img/8An-nTOVbA-512.png"
              alt="Intrinsic vs. extrinsic"
              class="noinvert hero"
              width="512"
              height="512"
            />
          </a>

          <div>
            <nav>
              <small>
                Published on
                <time datetime="2025-03-22" itemprop="datePublished"
                  >March 22, 2025</time
                >.
              </small>
              <span></span>
              <menu class="tags">
                <li>
                  <span class="tag">
                    #<a href="/tags/culture/">Culture</a>
                  </span>
                </li>
                <li>
                  <span class="tag"> #<a href="/tags/career/">Career</a> </span>
                </li>
                <li>
                  <span class="tag">
                    #<a href="/tags/inclusion-and-equity/"
                      >Inclusion and Equity</a
                    >
                  </span>
                </li>
              </menu>
            </nav>
            <div class="summary-row">
              <div itemprop="abstract">
                <p>
                  Intrinsic motivation is always better than extrinsic
                  motivation. But not as good as it is when one is motivated
                  both intrinsically and extrinsically.
                </p>
              </div>
            </div>
            <p class="more">
              <a href="/posts/intrinsic-motivation-an-anecdote/">Read more …</a>
            </p>
          </div>
        </div>
      </div>

      <div
        class="post-summary"
        itemscope=""
        itemtype="https://schema.org/BlogPosting"
      >
        <link itemprop="isPartOf" itemtype="https://schema.org/Blog" href="/" />
        <h2 class="title">
          <a itemprop="url" href="/posts/intermezzo-2025/">
            <span itemprop="name">Intermission - Q1 of 2025</span>
          </a>
        </h2>
        <div class="summary-row">
          <a href="/posts/intermezzo-2025/">
            <img
              src="/img/UalksBToBr-800.png"
              alt="A big red button labelled **DO NOT PRESS** is attached to the top of an ominous looking device to which many wires and conduits are attached."
              class="noinvert hero"
              width="800"
              height="532"
            />
          </a>

          <div>
            <nav>
              <small
                >Originally published on
                <time datetime="2025-04-07" itemprop="dateCreated"
                  >April 7, 2025</time
                >, and updated on
                <time datetime="2025-05-03" itemprop="datePublished"
                  >May 3, 2025</time
                >
                .
              </small>
              <span></span>
              <menu class="tags">
                <li>
                  <span class="tag">
                    #<a href="/tags/culture/">Culture</a>
                  </span>
                </li>
              </menu>
            </nav>
            <div class="summary-row">
              <div itemprop="abstract">
                <p>
                  Hate can be suppressed temporarily, but cannot be contained
                  for too long.
                </p>
              </div>
            </div>
            <p class="more">
              <a href="/posts/intermezzo-2025/">Read more …</a>
            </p>
          </div>
        </div>
      </div>

      <div
        class="post-summary"
        itemscope=""
        itemtype="https://schema.org/BlogPosting"
      >
        <link itemprop="isPartOf" itemtype="https://schema.org/Blog" href="/" />
        <h2 class="title">
          <a itemprop="url" href="/series/structure-of-experience/meaning/"
            ><span class="series-name">Structure Of Experience</span>:
            <span itemprop="name">Act I: Meaning</span>
          </a>
        </h2>
        <div class="summary-row">
          <div>
            <nav>
              <small>
                Published on
                <time datetime="2025-05-04" itemprop="datePublished"
                  >May 4, 2025</time
                >.
              </small>
              <span></span>
              <menu class="tags">
                <li>
                  <span class="tag"> #<a href="/tags/ai/">AI</a> </span>
                </li>
              </menu>
            </nav>
            <div class="summary-row">
              <div itemprop="abstract">
                <p>
                  Language builds meaning by combining your inner experiences.
                </p>
              </div>
            </div>
            <p class="more">
              <a href="/series/structure-of-experience/meaning/">Read more …</a>
            </p>
          </div>
        </div>
      </div>

      <div
        class="post-summary"
        itemscope=""
        itemtype="https://schema.org/BlogPosting"
      >
        <link itemprop="isPartOf" itemtype="https://schema.org/Blog" href="/" />
        <h2 class="title">
          <a itemprop="url" href="/series/unsung-team-roles/incentives/"
            ><span class="series-name">Unsung Team Roles</span>:
            <span itemprop="name">Incentives</span>
          </a>
        </h2>
        <div class="summary-row">
          <div>
            <nav>
              <small>
                Published on
                <time datetime="2025-08-12" itemprop="datePublished"
                  >August 12, 2025</time
                >.
              </small>
              <span></span>
              <menu class="tags">
                <li>
                  <span class="tag">
                    #<a href="/tags/organizations/">Organizations</a>
                  </span>
                </li>
              </menu>
            </nav>
            <div class="summary-row">
              <div itemprop="abstract">
                <p>
                  For a team to succeed, it needs the flexibility to
                  self-organize, which can lead to some members taking on more
                  work. To avoid burnout, these extra contributions must be
                  rewarded. Good managers are key, as they must recognize
                  individual efforts and their team-wide impact. Well-designed
                  incentives foster collaboration and reward those who
                  strengthen the team, while poor incentives cause employees to
                  stick rigidly to their roles and let the team fail.
                </p>
              </div>
            </div>
            <p class="more">
              <a href="/series/unsung-team-roles/incentives/">Read more …</a>
            </p>
          </div>
        </div>
      </div>
    </footer>

    <script
      async=""
      src="https://www.googletagmanager.com/gtag/js?id=G-GSREL2EZ4Y"
    ></script>
    <script>
      var dnt,
        doNotTrack = !1;
      if (
        (!1 &&
          ((dnt =
            navigator.doNotTrack ||
            window.doNotTrack ||
            navigator.msDoNotTrack),
          (doNotTrack = dnt == "1" || dnt == "yes")),
        !doNotTrack)
      ) {
        window.dataLayer = window.dataLayer || [];
        function gtag() {
          dataLayer.push(arguments);
        }
        (gtag("js", new Date()), gtag("config", "G-GSREL2EZ4Y"));
      }
    </script>
  </body>
</html>
